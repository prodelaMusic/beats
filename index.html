<!DOCTYPE HTML>
<html>
  <head>
    <title>Prod Ela - HOME OF EXCLUSIVE BEATS</title>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no" />
    <link rel="icon" type="image/jpeg" href="assets/images/Iguanao.jpg"> 
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css"> 
    <link rel="stylesheet" href="assets/css/main.css" /> 
    <noscript><link rel="stylesheet" href="assets/css/noscript.css" /></noscript>

    <script src="https://www.paypal.com/sdk/js?client-id=AXhnjeWwC9tHtI1GeCkbt-ttxRtT2kkvv1LpkHbdr4zhFp6Evua72XtEpJWj2TLqYxpdyL_rVVCg6VCN&currency=USD"></script>

    <style>
      /* --- ESTILOS CSS INCLUIDOS PARA VISUALIZACI칍N --- */
      @font-face {
        font-family: 'AnotherTag';
        src: url('assets/webfonts/letra/letra.ttf') format('truetype'),
             url('assets/webfonts/letra/letra.otf') format('opentype');
        font-weight: normal;
        font-style: normal;
      }
      
      :root { 
        --navH: 60px;
        --playerH: 60px; 
        --color-main: #FFFFFF; 
        --color-accent: #3b91fd; 
        
        /* --- NUEVA PALETA MORADA --- */
        --color-hero-bg: #441865; /* Morado base (Fondo de BODY) */
        --color-bg-dark: #1e0831; /* Morado muy oscuro (Header, Rows, Footer) */
        --color-bg-light: #2e0b48; /* Morado oscuro intermedio */ 
        --color-player: #1C1C1C; /* Oscuro para el reproductor */
        --color-border: #380d58; /* Borde/Separador de contraste */ 
        --color-hover: #380d58; /* Hover de filas de cat치logo */ 
        /* ----------------------------------------------------------------- */
      }

      /* --- GENERAL --- */
      body { 
        font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, sans-serif; 
        margin: 0; padding: 0; color: var(--color-main); 
        background: var(--color-hero-bg); 
        min-height: 100vh; 
        padding-bottom: var(--playerH); /* Espacio para el reproductor inferior */
        overflow-y: scroll;
      }
      a { text-decoration: none; color: var(--color-main); transition: color 0.2s; }
      a:hover { color: var(--color-accent); }
      section { padding: 40px 20px; max-width: 1000px; margin: 0 auto; }

      .button, .add-to-cart-btn-row { 
        padding: 6px 14px; background: none; color: var(--color-main) !important; 
        border: 1px solid var(--color-border); border-radius: 4px; font-weight: 500; 
        transition: background 0.2s, border-color 0.2s; text-transform: uppercase; 
        font-size: 0.75em; cursor: pointer; 
      }
      .button.primary { background: var(--color-accent); border-color: var(--color-accent); color: white !important;}
      .button.primary:hover { background: #3074d0; }

      /* --- NAVEGACI칍N --- */
      #topnav { 
        position: sticky; top: 0; left: 0; width: 100%; 
        background: var(--color-bg-dark); 
        backdrop-filter: blur(5px); 
        height: var(--navH); display: flex; justify-content: space-between; 
        align-items: center; padding: 0 30px; z-index: 1000; 
        border-bottom: 1px solid #1c1c1c00; transition: border-bottom 0.3s;
      }
      #topnav.scrolled { border-bottom: 1px solid var(--color-border); }

      .logo { display: flex; align-items: center; font-size: 1.5em; font-weight: bold; color: var(--color-main); }
      .logo img { height: 40px; margin-right: 10px; }
      .logo span { font-family: 'AnotherTag', cursive; }
      
      #topnav ul { display: flex; gap: 30px; margin: 0; padding: 0; list-style: none; }
      #topnav a { font-size: 0.85em; text-transform: uppercase; letter-spacing: 1px; padding: 5px 0; }
      #topnav a.active { color: var(--color-accent); border-bottom: 2px solid var(--color-accent); }
      
      .nav-icons-right { display: flex; align-items: center; gap: 15px; }

      .login-avatar { width: 30px; height: 30px; border-radius: 50%; background: #444; display: flex; align-items: center; justify-content: center; color: var(--color-main); font-size: 0.8em; cursor: pointer; border: 1px solid transparent; transition: border-color 0.2s; }
      
      /* --- Mini Cart Dropdown --- */
      .nav-cart-container { position: relative; }
      .cart-icon { cursor: pointer; color: var(--color-main); font-size: 1.2em; padding: 5px; transition: color 0.2s; }
      #cart-dropdown {
          position: absolute; right: 0; top: var(--navH); width: 350px; 
          background: var(--color-bg-light); 
          border: 1px solid var(--color-border); 
          border-top: none; box-shadow: 0 5px 15px rgba(0,0,0,0.5); z-index: 999; 
          padding: 20px; display: none; border-radius: 0 0 8px 8px;
      }
      .cart-count { position: absolute; top: 0; right: 0; background: red; color: white; border-radius: 50%; padding: 0 5px; font-size: 0.7em; }
      
      /* === CSS CORREGIDO PARA LA LISTA DEL CARRITO === */
      .cart-item-list {
          max-height: 300px; 
          overflow-y: auto; 
          padding: 0;
          list-style: none; 
      }
      .cart-item { 
          display: flex;
          justify-content: space-between;
          align-items: center;
          padding: 10px 0;
          border-bottom: 1px solid var(--color-border);
      }
      .cart-item:last-child {
          border-bottom: none;
      }
      .cart-item-info {
          display: flex;
          flex-direction: column;
          flex-grow: 1;
          margin-right: 10px;
      }
      .cart-item-info strong {
          font-weight: 600;
          font-size: 0.9em;
      }
      .cart-item-info span {
          font-size: 0.75em;
          color: #bbb;
      }
      .remove-item-btn {
          background: none;
          border: none;
          color: #999;
          cursor: pointer;
          font-size: 1.1em;
          transition: color 0.2s;
          padding: 5px;
          line-height: 1;
      }
      .remove-item-btn:hover {
          color: red;
      }
      /* ============================================== */


      /* --- HERO SECTION --- */
      #hero-section {
          background-image: url('assets/images/portada_beats.jpg'); 
          background-size: cover; background-position: center 20%; height: 80vh; 
          display: flex; flex-direction: column; justify-content: center; 
          align-items: center; text-align: center; position: relative; 
          overflow: hidden; user-select: none; pointer-events: none;
      }
      #hero-section::before {
          content: ''; position: absolute; top: 0; left: 0; right: 0; bottom: 0;
          /* Ajustar el degradado para que se fusione con el nuevo fondo del body */
          background: linear-gradient(to top, 
                                      var(--color-hero-bg) 0%, 
                                      rgba(46, 10, 71, 0.6) 70%, 
                                      rgba(46, 10, 71, 0.8) 100%); 
          z-index: 1;
      }
      .hero-content { z-index: 2; max-width: 800px; padding: 0 20px; pointer-events: auto; }
      
      /* Contenedor de b칰squeda CENTRADO */
      #hero-search-container {
        width: 100%; max-width: 600px; margin: 0 auto; position: relative;
        z-index: 5; display: flex; 
      }
      #hero-search-icon-wrapper {
        background: var(--color-accent); 
        padding: 0 15px; display: flex; align-items: center;
        justify-content: center; border-radius: 8px 0 0 8px; 
      }
      #hero-search-input {
        width: 100%; padding: 18px 20px 18px 20px; 
        background: var(--color-bg-light);
        border: 2px solid var(--color-accent);
        border-radius: 0 8px 8px 0; 
        color: var(--color-main); font-size: 1.1em; outline: none; transition: all 0.2s; border-left: none; 
      }
      #hero-search-container i.fa-search {
        color: var(--color-main); font-size: 1.1em; z-index: 6; position: static; transform: none;
      }
      
      /* --- DESPLEGABLE DE B칔SQUEDA --- */
      #search-dropdown {
          position: absolute; top: 100%; left: 0; width: 100%; 
          background: var(--color-bg-light); 
          border: 1px solid var(--color-accent); border-top: none; box-shadow: 0 5px 15px rgba(0,0,0,0.5); 
          z-index: 9; padding: 0; display: none; border-radius: 0 0 8px 8px;
          max-height: 200px; overflow-y: auto; 
      }
      .dropdown-beat-item {
          display: flex; align-items: center; padding: 8px 15px; cursor: pointer; transition: background 0.2s; font-size: 0.9em; 
      }
      .dropdown-beat-item:hover { background: var(--color-hover); }
      .dropdown-beat-item img { width: 30px; height: 30px; object-fit: cover; border-radius: 2px; margin-right: 10px; }
      .dropdown-beat-info { flex-grow: 1; display: flex; flex-direction: column; }
      .dropdown-beat-info h5 { margin: 0; font-size: 1em; font-weight: 600; line-height: 1.2; }
      .dropdown-beat-info p { margin: 0; font-size: 0.75em; color: #999; line-height: 1.2; }
      .dropdown-beat-price { color: var(--color-accent); font-weight: 600; margin-left: 10px; }
      .no-results { padding: 10px 15px; color: #777; font-style: italic; font-size: 0.9em; }
      
      /* --- CAT츼LOGO --- */
      #beats-section { padding-top: 60px; max-width: 1000px; } 
      #beats-section h2 { text-align: center; margin-bottom: 40px; font-size: 2.5em; }

      .beats-list-header {
          display: grid; 
          grid-template-columns: 40px 1.5fr 75px 75px 120px; 
          gap: 15px; padding: 15px 20px; margin-bottom: 5px; font-size: 0.85em; 
          color: #777; border-bottom: 1px solid var(--color-border); text-transform: uppercase;
      }
      .beat-item-row { 
        display: grid; 
        grid-template-columns: 40px 1.5fr 75px 75px 120px; 
        gap: 15px; align-items: center; padding: 10px 20px; 
        background: var(--color-bg-dark); 
        border-bottom: 1px solid #141414; 
        transition: background 0.2s, border-left 0.2s; cursor: pointer;
      }
      .beat-item-row:hover { 
          background: var(--color-hover); border-left: 3px solid var(--color-accent); 
      }
      .beat-item-row.playing-card { 
          border-left: 5px solid var(--color-accent); background: var(--color-hover); 
      }
      
      /* CENTRADO DE TEXTO EN COLUMNAS TIME Y BPM */
      .beat-row-time, 
      .beat-row-bpm,
      .beats-list-header > span:nth-child(3),
      .beats-list-header > span:nth-child(4) {
          text-align: center;
      }
      
      /* Contenedor de la imagen y el bot칩n de play */
      .beat-row-image-container {
          position: relative;
          width: 35px; 
          height: 35px;
          border-radius: 4px;
          overflow: hidden;
          cursor: pointer;
          flex-shrink: 0; 
          grid-column: 1 / 2; 
      }
      
      .beat-row-image-container img {
          width: 100%;
          height: 100%;
          object-fit: cover;
          transition: opacity 0.3s;
      }
      
      /* Bot칩n de play/pause dentro de la imagen */
      .play-pause-overlay {
          position: absolute;
          top: 0; left: 0; right: 0; bottom: 0;
          display: flex;
          align-items: center;
          justify-content: center;
          background-color: rgba(0, 0, 0, 0.5);
          transition: background-color 0.3s;
          font-size: 1.2em;
          color: white;
      }
      
      .beat-row-image-container:hover .play-pause-overlay {
          background-color: rgba(0, 0, 0, 0.3);
      }
      
      .beat-item-row.playing-card .play-pause-overlay {
          background-color: rgba(0, 0, 0, 0.6); 
      }
      
      /* Contenedor de t칤tulo/artista */
      .beat-row-left { 
          grid-column: 2 / 3; 
          display: flex; 
          align-items: center; 
          gap: 15px; 
          padding-left: 0; 
      }
      
      .beat-row-info {
           display: flex; 
           flex-direction: column;
      }
      
      .beat-row-info .beat-row-title {
          font-weight: 600;
          font-size: 0.95em;
          color: var(--color-main);
      }
      
      .beat-row-info .beat-row-artist {
          font-size: 0.8em;
          color: #bbb;
      }

      
      /* Contenedor del 칤cono de carrito */
      .beat-row-option {
          display: flex;
          justify-content: flex-end; 
          align-items: center;
          height: 100%; 
      }
      /* Estilo del bot칩n de carrito (Ahora solo Icono) */
      .add-to-cart-btn-row {
          padding: 8px 12px; 
          background: var(--color-accent); 
          border-color: var(--color-accent); 
          color: white !important;
          font-size: 1em; 
          text-transform: none; 
      }
      .add-to-cart-btn-row:hover {
           background: #3074d0;
           border-color: #3074d0;
      }
      
      /* --- MODALS GENERALES --- */
      #auth-modal, #license-modal {
          display: none; position: fixed; z-index: 2000; left: 0; top: 0; 
          width: 100%; height: 100%; overflow: auto; background-color: rgba(0,0,0,0.8);
          backdrop-filter: blur(5px);
      }
      #auth-modal-content, #license-modal-content {
          background-color: var(--color-bg-dark); 
          margin: 15% auto; padding: 30px; 
          border: 1px solid var(--color-border); width: 90%; max-width: 400px; 
          border-radius: 8px; position: relative;
      }
      .close-modal {
          position: absolute; top: 10px; right: 20px; color: #aaa; font-size: 28px; 
          font-weight: bold; cursor: pointer; transition: color 0.2s;
      }
      .close-modal:hover, .close-modal:focus { color: #fff; }

      /* --- MODAL DE LICENCIAS --- */
      .license-option {
          background: var(--color-bg-light); 
          padding: 15px; 
          margin-bottom: 10px; 
          border-radius: 6px; 
          cursor: pointer; 
          border: 2px solid transparent; 
          transition: all 0.2s;
          display: flex;
          justify-content: space-between;
          align-items: center;
      }
      .license-option:hover {
          border-color: var(--color-accent);
          background: #360f58;
      }
      .license-option.selected {
           border-color: var(--color-accent);
           box-shadow: 0 0 10px rgba(59, 145, 253, 0.5);
      }
      .license-info h4 { margin: 0 0 5px 0; font-size: 1.1em; color: var(--color-main); }
      .license-info p { margin: 0; font-size: 0.8em; color: #bbb; }
      .license-price { font-weight: bold; font-size: 1.2em; color: var(--color-accent); }
      
      /* AJUSTE DEL BOT칍N EN EL MODAL DE LICENCIAS */
      #add-license-to-cart-btn {
          width: 100%;
          margin-top: 20px;
          font-size: 0.9em; 
          padding: 10px; 
          white-space: normal; 
      }
      
      /* --- REPRODUCTOR GLOBAL FLOTANTE (CAMBIOS APLICADOS) --- */
      #global-player {
          position: fixed; 
          bottom: 0; 
          top: auto;
          left: 0; 
          width: 100%; height: var(--playerH); 
          background: var(--color-player); 
          border-top: 1px solid var(--color-border); 
          border-bottom: none;
          z-index: 998; 
          
          visibility: hidden; 
          opacity: 0; 
          pointer-events: none; 
          transition: visibility 0s, opacity 0.5s linear; 
          
          display: flex; 
          align-items: center; justify-content: space-between;
          padding: 0 20px; box-sizing: border-box;
      }
      
      #global-player.active {
          visibility: visible;
          opacity: 1;
          pointer-events: auto;
      }
      
      .player-controls { display: flex; align-items: center; gap: 15px; margin-right: 20px; }
      .player-controls button { 
          background: none; border: none; 
          color: var(--color-main); font-size: 1.1em; 
          cursor: pointer; transition: color 0.2s; padding: 5px; 
          outline: none; 
          box-shadow: none;
      }
      .player-controls button:hover { color: var(--color-accent); }
      #play-pause-btn { font-size: 1.4em; }

      .player-info { 
          display: flex; align-items: center; 
          width: 200px; 
          flex-shrink: 0; 
          margin-right: 40px; 
      }
      .player-info img { width: 40px; height: 40px; object-fit: cover; border-radius: 4px; margin-right: 10px; transition: opacity 0.5s; }
      .player-title h4, .player-title p { margin: 0; white-space: nowrap; overflow: hidden; text-overflow: ellipsis; }
      .player-title h4 { font-size: 0.9em; font-weight: 600; }
      .player-title p { font-size: 0.7em; color: #999; }

      .player-progress-container { 
          flex-grow: 1; 
          display: flex; 
          align-items: center; 
          gap: 10px; 
          max-width: 600px; 
      }
      .player-time { font-size: 0.75em; color: #999; }
      .player-progress-bar { 
          flex-grow: 1; height: 4px; background: #333; border-radius: 2px; 
          cursor: pointer; position: relative;
      }
      .player-progress { 
          height: 100%; width: 0%; background: var(--color-accent); border-radius: 2px; 
          transition: width 0.1s linear;
      }

      .player-volume-container { display: flex; align-items: center; gap: 10px; margin-left: 20px; width: 100px; flex-shrink: 0; }
      #volume-icon { color: var(--color-main); cursor: pointer; font-size: 1em; }
      .player-volume-slider { width: 100%; height: 4px; cursor: pointer; }

      /* --- SECCI칍N DE LICENCIAS Y FAQ/CONTACTO/REDES --- */
      #two, #faq-section, #contact-form-section, #three { max-width: 1000px; } 
      
      #two h2, 
      #faq-section h2, 
      #contact-form-section h2, 
      #three h2 { 
          text-align: center; 
          margin-bottom: 40px; 
          font-size: 2.5em;
          text-transform: uppercase; 
      } 

      /* === ESTILOS DE TABLA DE LICENCIAS RESTAURADOS === */
      .license-grid {
          display: grid;
          grid-template-columns: 1.5fr 1fr 1fr 1fr; 
          gap: 1px; 
          background: var(--color-border); 
          border-radius: 8px;
          overflow: hidden;
      }

      .license-cell {
          padding: 15px;
          background: var(--color-bg-dark); 
          text-align: center;
          font-size: 0.9em;
      }

      .license-cell.header {
          background: var(--color-bg-light); 
          font-weight: bold;
          text-transform: uppercase;
          font-size: 1em;
          color: var(--color-main);
      }

      .license-cell.feature {
          background: var(--color-bg-light); 
          text-align: left;
          font-weight: 500;
          color: var(--color-main);
      }
      
      /* Iconos dentro de la tabla */
      .check-icon { color: #4CAF50; font-size: 1.1em; }
      .cross-icon { color: #f44336; font-size: 1.1em; }
      .info-icon { color: #FFC107; margin-left: 5px; cursor: pointer; }
      .cell-content { display: flex; align-items: center; justify-content: center; }

      /* Ajuste para el color de la celda exclusiva */
      .license-grid .license-cell:nth-child(4n) {
          color: #FFC107; 
      }
      /* ======================================================= */
      
      /* FAQ STYLES */
      .faq-item {
          background: var(--color-bg-dark);
          margin-bottom: 10px;
          border-radius: 6px;
          overflow: hidden;
          border: 1px solid var(--color-border);
      }
      .faq-question {
          padding: 15px 20px;
          font-weight: 600;
          cursor: pointer;
          display: flex;
          justify-content: space-between;
          align-items: center;
          transition: background 0.2s;
      }
      .faq-question:hover {
          background: var(--color-hover);
      }
      .faq-answer {
          padding: 0 20px;
          max-height: 0;
          overflow: hidden;
          transition: max-height 0.3s ease-out, padding 0.3s ease-out;
          background: var(--color-bg-light);
          color: #ccc;
      }
      .faq-answer.open {
          max-height: 500px; 
          padding: 15px 20px;
      }
      .faq-icon {
          transition: transform 0.3s;
      }
      .faq-question.active .faq-icon {
          transform: rotate(180deg);
      }
      
      /* Pie de p치gina de Copyright sutil */
      #copyright-footer {
          padding: 15px 20px;
          text-align: center;
          font-size: 0.75em; 
          color: #999; 
          background: var(--color-bg-dark); 
          border-top: 1px solid var(--color-border);
      }
      #copyright-footer p {
          margin: 0;
      }
      
    </style>
  </head>
  <body>

    <div id="auth-modal">
        <div id="auth-modal-content">
            <span class="close-modal">&times;</span>
            <h3 id="modal-title" style="text-align: center; margin-bottom: 20px;">Iniciar Sesi칩n</h3>
            <form id="login-form" style="display: flex; flex-direction: column; gap: 15px;">
                <input type="email" name="email" placeholder="Correo Electr칩nico" required style="padding: 12px; background: #161616; border: 1px solid #333; color: white; border-radius: 4px;">
                <input type="password" name="password" placeholder="Contrase침a" required style="padding: 12px; background: #161616; border: 1px solid #333; color: white; border-radius: 4px;">
                <button type="submit" class="button primary" style="font-size: 1em; padding: 12px 20px;">Iniciar Sesi칩n</button>
            </form>
            <p style="text-align: center; margin-top: 20px; color: #999;">
                쯅o tienes cuenta? <a href="#" id="toggle-register" style="color: var(--color-accent);">Reg칤strate</a>
            </p>
            <form id="register-form" style="display: none; flex-direction: column; gap: 15px;">
                <input type="email" name="email" placeholder="Correo Electr칩nico" required style="padding: 12px; background: #161616; border: 1px solid #333; color: white; border-radius: 4px;">
                <input type="password" name="password" placeholder="Crear Contrase침a" required style="padding: 12px; background: #161616; border: 1px solid #333; color: white; border-radius: 4px;">
                <input type="password" name="confirm-password" placeholder="Confirmar Contrase침a" required style="padding: 12px; background: #161616; border: 1px solid #333; color: white; border-radius: 4px;">
                <button type="submit" class="button primary" style="font-size: 1em; padding: 12px 20px;">Registrarse</button>
            </form>
            <p style="text-align: center; margin-top: 20px; color: #999; display: none;" id="back-to-login-container">
                쯏a tienes cuenta? <a href="#" id="toggle-login" style="color: var(--color-accent);">Inicia Sesi칩n</a>
            </p>
        </div>
    </div>
    
    <div id="license-modal">
        <div id="license-modal-content">
            <span class="close-modal" id="close-license-modal">&times;</span>
            <h3 style="text-align: center; margin-bottom: 20px;">Selecciona la Licencia</h3>
            <p style="text-align: center; color: #bbb;">Beat: <span id="license-beat-name" style="font-weight: bold; color: var(--color-main);"></span></p>

            <div class="license-option" data-license="Est치ndar" data-price="0.01" data-desc="Distribuci칩n limitada (5,000 copias)">
                <div class="license-info">
                    <h4>Licencia Est치ndar</h4>
                    <p>Uso no exclusivo. Archivos MP3/WAV.</p>
                </div>
                <span class="license-price">$0.01</span>
            </div>
            <div class="license-option" data-license="Premium" data-price="0.01" data-desc="Distribuci칩n limitada (10,000 copias)">
                <div class="license-info">
                    <h4>Licencia Premium</h4>
                    <p>Uso no exclusivo. Archivos MP3/WAV + Stems.</p>
                </div>
                <span class="license-price">$0.01</span>
            </div>
            <div class="license-option" data-license="Exclusiva" data-price="999.00" data-desc="Venta total. Uso y distribuci칩n ilimitados.">
                <div class="license-info">
                    <h4>Licencia Exclusiva</h4>
                    <p>Venta total. Consulta precio final con el productor.</p>
                </div>
                <span class="license-price" style="color: #FFC107;">Consultar</span>
            </div>

            <button class="button primary" id="add-license-to-cart-btn" disabled>A침adir al Carrito</button>
        </div>
    </div>


    <nav id="topnav">
      <a href="#hero-section" class="logo">
        <img src="assets/images/IguanaoNoFondo.png" alt="Prod Ela Logo">
        <span>Prod Ela</span>
      </a>
      <ul>
        <li><a href="#beats-section" class="active">Cat치logo</a></li>
        <li><a href="#two">Licencias</a></li>
        <li><a href="#contact-form-section">Contacto</a></li> 
        <li><a href="#faq-section">FAQ</a></li> 
        <li><a href="#three">Redes</a></li> 
      </ul>
      
      <div class="nav-icons-right">
        <a href="#" class="login-avatar"><i class="fas fa-user"></i></a>

        <div class="nav-cart-container">
          <i class="fas fa-shopping-cart cart-icon" title="Ver Carrito"></i>
          <span class="cart-count" id="cart-item-count">0</span>
          
          <div id="cart-dropdown">
            <h4>Carrito (<span id="dropdown-count">0</span>)</h4>
            <div class="cart-item-list" id="cart-items-list" style="list-style: none; padding: 0; margin-bottom: 15px;">
              <li style="color:#777; padding-top:10px;">El carrito est치 vac칤o.</li>
            </div>
            <div class="cart-total" style="border-top: 1px solid #333; padding-top: 15px; margin-bottom: 15px; font-size: 1.1em; font-weight: bold; display: flex; justify-content: space-between;">
              Total a Pagar: <span id="cart-total-value">$0.00</span>
            </div>
            
            <div id="paypal-button-container-dropdown">
                <p style="text-align: center; color: #888; font-size: 0.85em;">A침ada productos al carrito para ver las opciones de pago.</p>
            </div>
          </div>
        </div>
      </div>
    </nav>

    <div id="global-player">
      <audio id="audio-player" src="" preload="auto"></audio>
      <div class="player-controls">
        <button id="prev-btn" title="Anterior" disabled><i class="fas fa-step-backward"></i></button>
        <button id="play-pause-btn" title="Reproducir/Pausar"><i class="fas fa-play"></i></button>
        <button id="next-btn" title="Siguiente" disabled><i class="fas fa-step-forward"></i></button>
      </div>

      <div class="player-info">
        <img id="player-img" src="assets/images/Iguanao.jpg" alt="Portada" style="opacity: 0.5;">
        <div class="player-title">
          <h4 id="player-beat-name">Selecciona un Beat</h4>
          <p id="player-artist-name">Prod Ela</p>
        </div>
      </div>

      <div class="player-progress-container">
        <span class="player-time" id="current-time">0:00</span>
        <div class="player-progress-bar" id="progress-bar">
          <div class="player-progress" id="progress"></div>
        </div>
        <span class="player-time" id="duration">0:00</span>
      </div>
      
      <div class="player-volume-container">
          <i class="fas fa-volume-up" id="volume-icon"></i>
          <input type="range" min="0" max="100" value="100" class="player-volume-slider" id="volume-slider">
      </div>
    </div>
    
    <section id="hero-section">
        <div class="hero-content">
            <h1>BEATS PARA ARTISTAS QUE LLEGAR츼N AL TOP</h1>
            <p>Beats Exclusivos de Trap, Reggaeton y R&B. Producido por Prod Ela.</p>

            <div id="hero-search-container">
                <div id="hero-search-icon-wrapper">
                    <i class="fas fa-search"></i>
                </div>
                <input type="text" id="hero-search-input" placeholder="Escribe el nombre del beat, artista o g칠nero..." onkeyup="filterBeats()">
                
                <div id="search-dropdown" style="border-radius: 0 0 8px 8px;">
                </div>
            </div>
            
            <a href="#beats-section" class="button primary" style="margin-top: 30px; font-size: 1em;">Ver Cat치logo Completo</a>
        </div>
    </section>

    <div id="wrapper">

      <section id="beats-section">
        <h2 style="text-align: center; margin-bottom: 40px; font-size: 2.5em;">CAT츼LOGO</h2> 
        
        <div class="beats-list-header">
            <span class="header-col" style="text-align: center;"></span>
            <span class="header-col" style="text-align: left;">T칈TULO / ARTISTA</span>
            <span class="header-col">TIME</span>
            <span class="header-col">BPM</span>
            <span class="header-col">OPTION</span>
        </div>
        
        <div class="beats-list" id="beats-list">
        
          <div class="beat-item-row" data-id="beat-cautiva-full" data-nombre="Eladio Carrion x Myke Towers Type Beat - CAUTIVA (FREE Tagged) Deep Dark Trap Prod. ela" data-artist="Prod. Ela (Trap/Deep Dark)" data-audio-src="beats/cautiva.mp3" data-image-src="beats_imagenes/cautiva.png" data-time="3:15" data-bpm="140">
            <div class="beat-row-image-container" data-action="play-pause">
                <img class="beat-row-image" src="beats_imagenes/cautiva.png" alt="Portada">
                <div class="play-pause-overlay">
                    <i class="fas fa-play"></i>
                </div>
            </div>
            <div class="beat-row-left">
                <div class="beat-row-info">
                    <span class="beat-row-title">Eladio Carrion x Myke Towers Type Beat - CAUTIVA (FREE Tagged) Deep Dark Trap Prod. ela</span>
                    <span class="beat-row-artist">Prod. Ela (Trap/Deep Dark)</span>
                </div>
            </div>
            <span class="beat-row-time">3:15</span>
            <span class="beat-row-bpm">140</span>
            <div class="beat-row-option">
                <button class="add-to-cart-btn-row button primary open-license-modal">
                    <i class="fas fa-shopping-cart"></i> 
                </button> 
            </div>
          </div>
          
        </div>
      </section>
      
      <section id="two">
          <h2>Informaci칩n de Licencias</h2> 
          <p style="text-align: center;">Consulta los t칠rminos y precios de las licencias Est치ndar, Premium y Exclusiva.</p>
          
          <div class="license-grid">
              
              <div class="license-cell header">Caracter칤sticas</div>
              <div class="license-cell header">Est치ndar</div>
              <div class="license-cell header">Premium</div>
              <div class="license-cell header" style="color: #FFC107;">Exclusiva</div>
              
              <div class="license-cell feature">Precio</div>
              <div class="license-cell" style="font-weight: bold;">$0.01 USD</div>
              <div class="license-cell" style="font-weight: bold;">$0.01 USD</div>
              <div class="license-cell" style="font-weight: bold; color: #FFC107;"><div class="cell-content">Consultar <i class="fas fa-info-circle info-icon"></i></div></div>
              <div class="license-cell feature">Tipo de Uso</div>
              <div class="license-cell">No Exclusivo</div>
              <div class="license-cell">No Exclusivo</div>
              <div class="license-cell">Exclusivo (Venta Total)</div>

              <div class="license-cell feature">L칤mite de Distribuci칩n (Copias)</div>
              <div class="license-cell">5,000</div>
              <div class="license-cell">10,000</div>
              <div class="license-cell"><div class="cell-content"><i class="fas fa-check-circle check-icon"></i> Ilimitado</div></div>
              
              <div class="license-cell feature">L칤mite de Reproducciones (Spotify, YT, etc.)</div>
              <div class="license-cell">50,000</div>
              <div class="license-cell">100,000</div>
              <div class="license-cell"><div class="cell-content"><i class="fas fa-check-circle check-icon"></i> Ilimitado</div></div>
              
              <div class="license-cell feature">Ganancia Comercial (Neto)</div>
              <div class="license-cell">50%</div>
              <div class="license-cell">100%</div>
              <div class="license-cell">100%</div>

              <div class="license-cell feature">Cr칠dito al Productor</div>
              <div class="license-cell"><div class="cell-content"><i class="fas fa-check-circle check-icon"></i> Obligatorio</div></div>
              <div class="license-cell"><div class="cell-content"><i class="fas fa-check-circle check-icon"></i> Obligatorio</div></div>
              <div class="license-cell"><div class="cell-content"><i class="fas fa-check-circle check-icon"></i> Obligatorio</div></div>
              
              <div class="license-cell feature">Archivos Incluidos</div>
              <div class="license-cell">MP3/WAV</div>
              <div class="license-cell">MP3/WAV + Track Outs (Stems)</div>
              <div class="license-cell">MP3/WAV + Track Outs (Stems)</div>

              <div class="license-cell feature">Uso en Videos Musicales</div>
              <div class="license-cell"><div class="cell-content"><i class="fas fa-check-circle check-icon"></i> S칤</div></div>
              <div class="license-cell"><div class="cell-content"><i class="fas fa-check-circle check-icon"></i> S칤</div></div>
              <div class="license-cell"><div class="cell-content"><i class="fas fa-check-circle check-icon"></i> S칤</div></div>
              
              <div class="license-cell feature">Uso en Radio</div>
              <div class="license-cell"><div class="cell-content"><i class="fas fa-times-circle cross-icon"></i> No</div></div>
              <div class="license-cell"><div class="cell-content"><i class="fas fa-check-circle check-icon"></i> S칤</div></div>
              <div class="license-cell"><div class="cell-content"><i class="fas fa-check-circle check-icon"></i> S칤</div></div>
              
          </div>
      </section>
      
      <section id="contact-form-section">
          <h2>Contacto y Beats Personalizados</h2>
          <p style="text-align: center; color: #bbb;">Utiliza el siguiente formulario para consultas, cotizaciones de licencias exclusivas o para solicitar un beat hecho a medida.</p>
          <form id="contact-form" action="https://formsubmit.co/aleperezz6900@gmail.com" method="POST" style="display: flex; flex-direction: column; gap: 15px;">
              <input type="text" name="name" placeholder="Tu Nombre" required style="padding: 12px; background: #161616; border: 1px solid #333; color: white; border-radius: 4px;">
              <input type="email" name="email" placeholder="Tu Correo Electr칩nico" required style="padding: 12px; background: #161616; border: 1px solid #333; color: white; border-radius: 4px;">
              <select name="subject" required style="padding: 12px; background: #161616; border: 1px solid #333; color: #ccc; border-radius: 4px;">
                  <option value="" disabled selected>Selecciona un Asunto</option>
                  <option value="Consulta General">Consulta General</option>
                  <option value="Licencia Exclusiva">Cotizaci칩n Licencia Exclusiva</option>
                  <option value="Beat Personalizado">Solicitud Beat Personalizado</option>
              </select>
              <textarea name="message" placeholder="Tu Mensaje" rows="5" required style="padding: 12px; background: #161616; border: 1px solid #333; color: white; border-radius: 4px; resize: vertical;"></textarea>
              <button type="submit" class="button primary" style="font-size: 1em; padding: 12px 20px;">Enviar Mensaje</button>
          </form>
          <p id="form-message" style="margin-top: 20px; text-align: center; color: var(--color-accent); display: none;">춰Gracias! Tu mensaje ha sido enviado. Te responderemos pronto.</p>
      </section>

      <section id="faq-section">
          <h2>Preguntas Frecuentes (FAQ)</h2>
          
          <div class="faq-list">
              
              <div class="faq-item">
                  <div class="faq-question">
                      <span>쮺칩mo obtengo el beat despu칠s de la compra?</span>
                      <i class="fas fa-chevron-down faq-icon"></i>
                  </div>
                  <div class="faq-answer">
                      <p>Inmediatamente despu칠s de completar el pago, recibir치s un correo electr칩nico con todos los archivos de alta calidad (.wav, .mp3 y .stems si aplica).</p>
                  </div>
              </div>

              <div class="faq-item">
                  <div class="faq-question">
                      <span>쯇uedo usar el beat para fines comerciales?</span>
                      <i class="fas fa-chevron-down faq-icon"></i>
                  </div>
                  <div class="faq-answer">
                      <p>S칤, todas nuestras licencias (excepto la gratuita/demo) permiten el uso comercial, pero con diferentes l칤mites de distribuci칩n y reproducciones. Consulta los detalles de cada licencia antes de comprar.</p>
                  </div>
              </div>

              <div class="faq-item">
                  <div class="faq-question">
                      <span>쯊engo que dar cr칠ditos al productor?</span>
                      <i class="fas fa-chevron-down faq-icon"></i>
                  </div>
                  <div class="faq-answer">
                      <p>S칤, es obligatorio dar cr칠dito al productor (Prod Ela) en todas las plataformas donde se publique el tema: "Beat by Prod Ela".</p>
                  </div>
              </div>

              <div class="faq-item">
                  <div class="faq-question">
                      <span>쯈u칠 significa "Tracked Out Stems"?</span>
                      <i class="fas fa-chevron-down faq-icon"></i>
                  </div>
                  <div class="faq-answer">
                      <p>Son las pistas separadas del beat (ejemplo: bombo, caja, bajo, melod칤a), lo que te da un control total para la mezcla y masterizaci칩n profesional de tu canci칩n.</p>
                  </div>
              </div>

          </div>
      </section>
      
      <section id="three">
          <h2>Redes</h2> 
          <p style="text-align: center;">S칤gueme y mantente al tanto de los nuevos lanzamientos.</p>
          <div style="font-size: 2em; margin-top: 20px; display: flex; gap: 20px; justify-content: center;">
              
              <a href="https://instagram.com/prod_ela" target="_blank" title="Instagram Prod Ela"><i class="fab fa-instagram"></i></a>
              
              <a href="https://www.tiktok.com/@prodela" target="_blank" title="TikTok Prod Ela"><i class="fab fa-tiktok"></i></a>

              <a href="https://www.youtube.com/@ProdElaa" target="_blank" title="YouTube Principal Prod Elaa"><i class="fab fa-youtube"></i></a>
              
              <a href="https://www.youtube.com/@JerkTailz" target="_blank" title="YouTube Secundario JerkTailz"><i class="fab fa-youtube-square"></i></a>
              
          </div>
      </section>

    </div> 
    
    <footer id="copyright-footer">
        <p>&copy; Todos los derechos est치n reservados por Prod. Ela</p>
    </footer>


    <script src="assets/js/jquery.min.js"></script>
    <script>
        // ==========================================================
        // 游 L칍GICA DE B칔SQUEDA INSTANT츼NEA 
        // ==========================================================
        const searchInput = document.getElementById('hero-search-input');
        const searchDropdown = document.getElementById('search-dropdown');
        const beatRowsData = Array.from(document.querySelectorAll('.beat-item-row')).map(row => ({
            id: row.getAttribute('data-id'),
            nombre: row.getAttribute('data-nombre'),
            artist: row.getAttribute('data-artist'),
            audioSrc: row.getAttribute('data-audio-src'),
            imageSrc: row.getAttribute('data-image-src'),
            time: row.getAttribute('data-time'), 
            bpm: row.getAttribute('data-bpm'),   
            element: row 
        }));

        function filterBeats() {
            const query = searchInput.value.toLowerCase().trim();
            searchDropdown.innerHTML = '';

            if (query.length < 2) {
                searchDropdown.style.display = 'none';
                beatRowsData.forEach(data => data.element.classList.remove('hidden'));
                return;
            }

            const results = beatRowsData.filter(data => 
                data.nombre.toLowerCase().includes(query) || 
                data.artist.toLowerCase().includes(query)
            );
            
            document.querySelectorAll('.beat-item-row').forEach(row => row.classList.add('hidden'));

            if (results.length > 0) {
                results.forEach(data => {
                    const item = document.createElement('div');
                    item.className = 'dropdown-beat-item';
                    item.innerHTML = `
                        <img src="${data.imageSrc}" alt="Portada">
                        <div class="dropdown-beat-info">
                            <h5>${data.nombre}</h5>
                            <p>${data.artist}</p>
                        </div>
                    `; 
                    
                    item.addEventListener('click', () => {
                        const originalBeatRow = document.querySelector(`.beat-item-row[data-id="${data.id}"]`);
                        
                        document.querySelectorAll('.beat-item-row').forEach(d => d.classList.add('hidden'));
                        originalBeatRow.classList.remove('hidden');

                        const navHeight = document.getElementById('topnav').offsetHeight;
                        window.scrollTo({
                            top: originalBeatRow.offsetTop - navHeight - 10,
                            behavior: "smooth"
                        });
                        
                        // NOTA: Se llama a togglePlay en la fila completa, la l칩gica interna manejar치 la reproducci칩n.
                        togglePlay(originalBeatRow);

                        searchDropdown.style.display = 'none';
                        searchInput.value = data.nombre; 
                    });

                    searchDropdown.appendChild(item);
                });
                searchDropdown.style.display = 'block';
            } else {
                searchDropdown.innerHTML = `<div class="no-results">No se encontraron beats que coincidan con "${searchInput.value}".</div>`;
                searchDropdown.style.display = 'block';
            }
        }
        
        document.addEventListener('click', (e) => {
            if (!e.target.closest('#hero-search-container')) {
                searchDropdown.style.display = 'none';
                if (searchInput.value.trim() === "") {
                    document.querySelectorAll('.beat-item-row').forEach(data => data.element.classList.remove('hidden'));
                }
            }
        });
        
        searchInput.addEventListener('input', () => {
            if (searchInput.value.trim() === "") {
                searchDropdown.style.display = 'none';
                document.querySelectorAll('.beat-item-row').forEach(data => data.classList.remove('hidden'));
            }
        });


        // ==========================================================
        // 游 L칍GICA DEL CARRITO 
        // ==========================================================
        let cart = [];
        const cartCount = document.getElementById('cart-item-count');
        const dropdownCount = document.getElementById('dropdown-count');
        const cartItemsList = document.getElementById('cart-items-list');
        const cartTotalValue = document.getElementById('cart-total-value');
        const cartDropdown = document.getElementById('cart-dropdown');
        const openLicenseModalButtons = document.querySelectorAll('.open-license-modal');

        function calculateTotal() { return cart.reduce((sum, item) => sum + item.precio, 0); }
        
        function removeBeat(id) {
            cart = cart.filter(item => item.id !== id);
            updateCartDisplay();
        }

        function updateCartDisplay() {
            const total = calculateTotal();
            cartCount.textContent = cart.length;
            dropdownCount.textContent = cart.length;
            cartTotalValue.textContent = `$${total.toFixed(2)}`;
            
            cartItemsList.innerHTML = ''; 
            if (cart.length === 0) {
                cartItemsList.innerHTML = '<li style="color:#777; padding-top:10px;">El carrito est치 vac칤o.</li>';
            } else {
                cart.forEach(item => {
                    const itemElement = document.createElement('div'); 
                    itemElement.classList.add('cart-item');
                    
                    itemElement.innerHTML = `
                        <img src="${item.imageSrc}" alt="${item.nombre}" style="width: 30px; height: 30px; object-fit: cover; border-radius: 2px;">
                        <div class="cart-item-info">
                            <strong>${item.nombre}</strong>
                            <span>${item.licencia} | $${item.precio.toFixed(2)}</span>
                        </div>
                        <button class="remove-item-btn" data-id="${item.id}" title="Eliminar ${item.nombre}">
                            <i class="fas fa-times"></i>
                        </button>
                    `;
                    cartItemsList.appendChild(itemElement); 
                });
                
                document.querySelectorAll('.remove-item-btn').forEach(button => {
                    button.addEventListener('click', (e) => {
                        e.stopPropagation();
                        const itemId = button.getAttribute('data-id');
                        removeBeat(itemId);
                    });
                });
            }
            
            renderPayPalButton(total);
        }

        function addToCart(beatData, license) {
            // El beatData.nombre ya deber칤a venir con el sufijo de licencia
            const id = beatData.id + '-' + license.licencia.replace(/\s/g, ''); 
            
            const existingItem = cart.find(item => item.id === id);
            
            if (existingItem) {
                 alert(`"${beatData.nombre}" con licencia ${license.licencia} ya est치 en el carrito.`);
                 return;
            }
            
            cart.push({ 
                id: id, 
                nombre: beatData.nombre, // Se usa el nombre que ya incluye el sufijo
                precio: license.precio, 
                imageSrc: beatData.imageSrc,
                licencia: license.licencia // Se guarda el tipo de licencia por separado para mostrar
            });
            updateCartDisplay();
            cartDropdown.style.display = 'block'; 
        }
        
        // ==========================================================
        // 游늶 L칍GICA DEL MODAL DE LICENCIA (MODIFICADA)
        // ==========================================================
        const licenseModal = document.getElementById('license-modal');
        const closeLicenseModalBtn = document.getElementById('close-license-modal');
        const licenseBeatNameEl = document.getElementById('license-beat-name');
        const licenseOptions = document.querySelectorAll('.license-option');
        const addLicenseToCartBtn = document.getElementById('add-license-to-cart-btn');
        let currentBeatData = null;
        let selectedLicense = null;
        
        openLicenseModalButtons.forEach(button => {
            button.addEventListener('click', (e) => {
                e.stopPropagation();
                const beatElement = e.target.closest('.beat-item-row');
                
                currentBeatData = {
                    id: beatElement.getAttribute('data-id'),
                    nombre: beatElement.getAttribute('data-nombre'),
                    imageSrc: beatElement.getAttribute('data-image-src')
                };
                
                licenseBeatNameEl.textContent = currentBeatData.nombre;
                
                licenseOptions.forEach(opt => opt.classList.remove('selected'));
                selectedLicense = null;
                addLicenseToCartBtn.disabled = true;
                addLicenseToCartBtn.textContent = 'A침adir al Carrito';
                
                licenseModal.style.display = 'block';
            });
        });

        closeLicenseModalBtn.addEventListener('click', () => { licenseModal.style.display = 'none'; });
        
        licenseOptions.forEach(option => {
            option.addEventListener('click', () => {
                licenseOptions.forEach(opt => opt.classList.remove('selected'));
                option.classList.add('selected');
                
                const licenseName = option.getAttribute('data-license');
                const licensePrice = parseFloat(option.getAttribute('data-price'));
                
                selectedLicense = {
                    licencia: licenseName,
                    precio: licensePrice
                };
                
                if (licenseName === 'Exclusiva') {
                    addLicenseToCartBtn.textContent = 'Contactar para Licencia Exclusiva';
                    addLicenseToCartBtn.disabled = false;
                } else {
                    addLicenseToCartBtn.textContent = `A침adir Licencia ${licenseName} ($${licensePrice.toFixed(2)})`;
                    addLicenseToCartBtn.disabled = false;
                }
            });
        });
        
        addLicenseToCartBtn.addEventListener('click', () => {
            if (!currentBeatData || !selectedLicense) return;
            
            licenseModal.style.display = 'none';

            if (selectedLicense.licencia === 'Exclusiva') {
                const contactSection = document.getElementById('contact-form-section');
                const navHeight = document.getElementById('topnav').offsetHeight;
                window.scrollTo({
                    top: contactSection.offsetTop - navHeight - 10,
                    behavior: "smooth"
                });
                alert(`Por favor, utiliza el formulario de contacto para solicitar la Licencia Exclusiva del beat "${currentBeatData.nombre}".`);
            } else {
                // ***** INICIO DE LA MODIFICACI칍N (A침adir (Est치ndar) o (Premium) al nombre) *****
                let licenseLabel = '';
                if (selectedLicense.licencia === 'Est치ndar') {
                    licenseLabel = ' (Est치ndar)';
                } else if (selectedLicense.licencia === 'Premium') {
                    licenseLabel = ' (Premium)';
                }

                // Crear el nombre final con la etiqueta de la licencia
                const finalItemName = currentBeatData.nombre + licenseLabel;
                
                // Crear un objeto de datos del beat actualizado con el nombre final
                const finalBeatData = {
                    ...currentBeatData, 
                    nombre: finalItemName // Nombre con el sufijo (Est치ndar) o (Premium)
                };

                // Llamar a addToCart con el nombre modificado.
                addToCart(finalBeatData, selectedLicense);
                // ***** FIN DE LA MODIFICACI칍N *****
            }
        });


        document.querySelector('.cart-icon').addEventListener('click', (e) => {
            e.stopPropagation(); 
            cartDropdown.style.display = cartDropdown.style.display === 'block' ? 'none' : 'block';
        });

        document.addEventListener('click', (e) => {
            if (!e.target.closest('.nav-cart-container')) {
                cartDropdown.style.display = 'none';
            }
            if (e.target == licenseModal) { 
                licenseModal.style.display = 'none';
            }
        });

        function renderPayPalButton(total) {
            const container = document.getElementById('paypal-button-container-dropdown'); 
            if (typeof paypal === 'undefined' || total <= 0) {
                container.innerHTML = `<p style="text-align: center; color: #888; font-size: 0.85em;">A침ada productos al carrito para ver las opciones de pago.</p>`;
                return;
            }
            
            container.innerHTML = '';
            
            paypal.Buttons({
                style: { layout: 'vertical', color: 'gold' },
                createOrder: function(data, actions) {
                    return actions.order.create({
                        purchase_units: [{
                            amount: { value: total.toFixed(2), currency_code: 'USD', breakdown: { item_total: { currency_code: 'USD', value: total.toFixed(2) } } },
                            // MODIFICACI칍N: Se usa item.nombre directamente, ya que incluye la licencia.
                            items: cart.map(item => ({
                                name: item.nombre, 
                                unit_amount: { currency_code: 'USD', value: item.precio.toFixed(2) }, 
                                quantity: 1, 
                                category: 'DIGITAL_GOODS'
                            }))
                        }]
                    });
                },
                onApprove: function(data, actions) {
                    return actions.order.capture().then(function(orderData) {
                        const transaction = orderData.purchase_units[0].payments.captures[0];
                        alert(`춰Pago completado! ID de transacci칩n: ${transaction.id}. Revisaremos el pago y enviaremos los beats a tu correo.`);
                        cart = [];
                        updateCartDisplay();
                    });
                },
                onCancel: function (data) { console.log('Transacci칩n cancelada.'); },
                onError: function (err) { console.error('Error de PayPal:', err); alert('Ocurri칩 un error con la transacci칩n de PayPal. Intente de nuevo.'); }
            }).render('#paypal-button-container-dropdown');
        }


        // ==========================================================
        // 仇 L칍GICA DEL FAQ (ACORDE칍N)
        // ==========================================================
        document.querySelectorAll('.faq-question').forEach(question => {
            question.addEventListener('click', () => {
                const answer = question.nextElementSibling;
                const wasActive = question.classList.contains('active');
                
                // Cerrar todos los dem치s
                document.querySelectorAll('.faq-question').forEach(q => {
                    q.classList.remove('active');
                    q.nextElementSibling.classList.remove('open');
                });

                // Abrir o cerrar el actual
                if (!wasActive) {
                    question.classList.add('active');
                    answer.classList.add('open');
                }
            });
        });


        // ==========================================================
        // 游꿨 L칍GICA DEL REPRODUCTOR GLOBAL (CONFIRMACI칍N DE FUNCIONAMIENTO)
        // ==========================================================
        const audio = document.getElementById('audio-player');
        const globalPlayer = document.getElementById('global-player');
        const playPauseBtn = document.getElementById('play-pause-btn');
        const playerBeatName = document.getElementById('player-beat-name');
        const playerArtistName = document.getElementById('player-artist-name');
        const playerImg = document.getElementById('player-img');
        const progressBar = document.getElementById('progress-bar');
        const progress = document.getElementById('progress');
        const currentTimeEl = document.getElementById('current-time');
        const durationEl = document.getElementById('duration');
        const volumeSlider = document.getElementById('volume-slider');
        const volumeIcon = document.getElementById('volume-icon');
        let currentBeatId = null;

        function formatTime(seconds) {
            const minutes = Math.floor(seconds / 60);
            const secs = Math.floor(seconds % 60);
            return `${minutes}:${secs < 10 ? '0' : ''}${secs}`;
        }
        
        function resetBeatStyles() {
            document.querySelectorAll('.beat-item-row').forEach(el => {
                el.classList.remove('playing-card');
                const btn = el.querySelector('.play-pause-overlay i');
                if (btn) btn.className = 'fas fa-play';
            });
        }

        function togglePlay(beatElement) {
            const beatId = beatElement.getAttribute('data-id');
            const beatName = beatElement.getAttribute('data-nombre');
            const beatArtist = beatElement.getAttribute('data-artist');
            const audioSrc = beatElement.getAttribute('data-audio-src');
            const imageSrc = beatElement.getAttribute('data-image-src');
            
            // Muestra el reproductor
            if (!globalPlayer.classList.contains('active')) {
                 globalPlayer.classList.add('active'); 
            }

            if (currentBeatId === beatId && !audio.paused) { 
                audio.pause(); 
                return; 
            }
            if (currentBeatId === beatId && audio.paused) { 
                audio.play(); 
                return; 
            }

            resetBeatStyles(); 
            audio.src = audioSrc;
            currentBeatId = beatId;
            
            playerBeatName.textContent = beatName;
            playerArtistName.textContent = beatArtist || 'Prod Ela'; 
            playerImg.src = imageSrc;
            playerImg.style.opacity = 1;

            audio.play().catch(e => {
                console.error("Error al reproducir el audio. Puede ser por la ruta o pol칤tica de autoplay:", e);
                playPauseBtn.querySelector('i').className = 'fas fa-play'; 
            });
        }

        document.querySelectorAll('.beat-item-row').forEach(row => {
            const imageContainer = row.querySelector('.beat-row-image-container');
            
            // Click en la fila (excepto botones de carrito y play)
            row.addEventListener('click', (e) => {
                if (!e.target.closest('.add-to-cart-btn-row') && !e.target.closest('.beat-row-image-container')) {
                    togglePlay(e.currentTarget); 
                }
            });
            
            // Click en el contenedor de la imagen (bot칩n de play)
            if (imageContainer) {
                 imageContainer.addEventListener('click', (e) => {
                    e.stopPropagation(); 
                    togglePlay(e.currentTarget.closest('.beat-item-row'));
                 });
            }
        });
        
        playPauseBtn.addEventListener('click', () => {
            if (!currentBeatId) return;
            audio.paused ? audio.play() : audio.pause();
        });
        
        audio.addEventListener('play', () => {
            playPauseBtn.querySelector('i').className = 'fas fa-pause';
            const currentCard = document.querySelector(`.beat-item-row[data-id="${currentBeatId}"]`);
            if(currentCard) {
                const overlayIcon = currentCard.querySelector('.play-pause-overlay i');
                if (overlayIcon) overlayIcon.className = 'fas fa-pause';
                currentCard.classList.add('playing-card');
            }
        });

        audio.addEventListener('pause', () => {
            playPauseBtn.querySelector('i').className = 'fas fa-play';
            const currentCard = document.querySelector(`.beat-item-row[data-id="${currentBeatId}"]`);
            if(currentCard) {
                const overlayIcon = currentCard.querySelector('.play-pause-overlay i');
                if (overlayIcon) overlayIcon.className = 'fas fa-play';
                currentCard.classList.remove('playing-card');
            }
        });
        
        audio.addEventListener('loadedmetadata', () => { durationEl.textContent = formatTime(audio.duration); });
        audio.addEventListener('timeupdate', () => {
            const progressPercent = (audio.currentTime / audio.duration) * 100;
            progress.style.width = `${progressPercent}%`;
            currentTimeEl.textContent = formatTime(audio.currentTime);
        });
        audio.addEventListener('ended', () => { 
            resetBeatStyles(); 
            playPauseBtn.querySelector('i').className = 'fas fa-play'; 
            globalPlayer.classList.remove('active'); // Ocultar al terminar la reproducci칩n
        });
        progressBar.addEventListener('click', (e) => {
            if (!audio.src) return;
            const clickX = e.offsetX;
            audio.currentTime = (clickX / progressBar.clientWidth) * audio.duration;
        });

        let lastVolume = audio.volume; 
        volumeSlider.addEventListener('input', (e) => {
            const vol = e.target.value / 100;
            audio.volume = vol; updateVolumeIcon(vol); lastVolume = vol;
        });
        volumeIcon.addEventListener('click', () => {
            const newVol = audio.volume > 0 ? 0 : (lastVolume > 0.05 ? lastVolume : 0.7); 
            audio.volume = newVol; volumeSlider.value = newVol * 100; updateVolumeIcon(newVol);
        });
        function updateVolumeIcon(vol) {
            volumeIcon.className = vol === 0 ? 'fas fa-volume-mute' : (vol < 0.5 ? 'fas fa-volume-down' : 'fas fa-volume-up');
        }


        // ==========================================================
        // L칍GICA DE NAVEGACI칍N Y SCROLL
        // ==========================================================
        const nav = document.getElementById('topnav');
        const hero = document.getElementById('hero-section');
        const sections = document.querySelectorAll("#beats-section, #two, #contact-form-section, #faq-section, #three"); 
        const navLinks = document.querySelectorAll("#topnav ul a");

        const observer = new IntersectionObserver(([entry]) => {
            nav.classList.toggle('scrolled', !entry.isIntersecting);
        }, {
            rootMargin: `-${nav.offsetHeight}px 0px 0px 0px`
        });
        observer.observe(hero);

        function setActiveLink() {
            let index = 0; 
            const currentScroll = window.scrollY; 
            const navHeight = nav.offsetHeight;
            
            if (currentScroll === 0) {
                 navLinks.forEach(link => link.classList.remove("active"));
                 navLinks[0].classList.add("active");
                 return;
            }

            sections.forEach((section, i) => {
                // Se resta un poco m치s para activar el link antes de que la secci칩n toque exactamente el tope.
                if (section.offsetTop - navHeight - 50 <= currentScroll) { 
                    index = i; 
                }
            });

             if (currentScroll + window.innerHeight >= document.body.scrollHeight) {
                 // Si se llega al final de la p치gina (Redes), asegurar que est칠 activo.
                index = sections.length - 1; 
            }


            navLinks.forEach(link => link.classList.remove("active"));
            
            if (index < navLinks.length) {
                navLinks[index].classList.add("active");
            }
        }
        window.addEventListener("scroll", setActiveLink);
        
        document.querySelectorAll('a[href^="#"]').forEach(a => {
          a.addEventListener("click", e => {
            const target = document.querySelector(a.getAttribute("href"));
            if (target) {
              e.preventDefault();
              const offset = target.offsetTop - nav.offsetHeight;
              window.scrollTo({ top: offset, behavior: "smooth" });
              setTimeout(setActiveLink, 600); 
            }
          });
        });

        // Inicializar
        updateCartDisplay(); 
        updateVolumeIcon(audio.volume);
        setActiveLink();
    </script>
  </body>
</html>